<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
    <id value="ch-core-veka-identifier" />
    <url value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-veka-identifier" />
    <name value="VEKAIdentifier" />
    <title value="Insurance Card Number (Identifier)" />
    <status value="active" />
    <description value="Identifier in 20-digit format. The number shall have exactly 20 digits and start with 756." />
    <kind value="complex-type" />
    <abstract value="false" />
    <type value="Identifier" />
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Identifier" />
    <derivation value="constraint" />
    <differential>
        <element id="Identifier">
            <path value="Identifier" />
        </element>
        <element id="Identifier.system">
            <path value="Identifier.system" />
            <min value="1" />
            <fixedUri value="urn:oid:2.16.756.5.30.1.123.100.1.1.1" />
        </element>
        <element id="Identifier.value">
            <path value="Identifier.value" />
            <min value="1" />
            <constraint>
                <key value="veka-length" />
                <severity value="error" />
                <human value="Insurance card number must be exactly 20 characters long" />
                <expression value="value.matches('^[0-9]{20}$')" />
            </constraint>
            <constraint>
                <key value="veka-startswith807560" />
                <severity value="error" />
                <human value="Insurance card number must start with 807560" />
                <expression value="value.startsWith('807560')" />
            </constraint>
        </element>
    </differential>
</StructureDefinition>