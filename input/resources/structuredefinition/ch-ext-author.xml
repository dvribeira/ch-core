<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
    <id value="ch-ext-author"/>
    <url value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-author"/>
    <version value="3.0.0"/>
    <name value="Author"/>
    <title value="Author of the content"/>
    <status value="active"/>
    <description value="Extension to reference the person (and her/his organization) who is responsible for the content 
    (e.g. an author of an eMedication document or a recorder of an immunization). 
    This extension is used to differentiate on entry level between the author of the content (represented with this extension) and 
    the author of the medical decision or the performer of an event (represented e.g. with Resource.performer/informationSource)."/>
    <fhirVersion value="4.0.1"/>
    <kind value="complex-type"/>
    <abstract value="false"/>
    <context>
        <type value="element"/>
        <expression value="MedicationStatement"/>
    </context>
    <context>
        <type value="element"/>
        <expression value="MedicationDispense"/>
    </context>
    <context>
        <type value="element"/>
        <expression value="MedicationRequest"/>
    </context>
    <context>
        <type value="element"/>
        <expression value="Observation"/>
    </context>
    <context>
        <type value="element"/>
        <expression value="Immunization"/>
    </context>
    <type value="Extension"/>
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Extension">
            <path value="Extension"/>
        </element>
        <element id="Extension.extension">
            <path value="Extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.url">
            <path value="Extension.url"/>
            <type>
                <code value="uri"/>
            </type>
            <fixedUri value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-author"/>
        </element>
        
        <element id="Extension.valueReference">
            <path value="Extension.valueReference"/>
            <short value="Author of the content"/>
            <min value="1"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient"/>
                <targetProfile value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-practitionerrole"/>
                <targetProfile value="http://hl7.org/fhir/StructureDefinition/RelatedPerson"/>
            </type>
        </element>

        <element id="Extension.valueReference.extension">
            <path value="Extension.valueReference.extension"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="url"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
        </element>
        <element id="Extension.valueReference.extension:time">
            <path value="Extension.valueReference.extension"/>
            <sliceName value="time"/>
            <short value="Timestamp of the authorship/data input"/>
            <min value="0"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-time"/>
            </type>
        </element>
        <element id="Extension.valueReference.reference">
            <path value="Extension.valueReference.reference"/>
            <min value="1"/>
        </element>

    </differential>
</StructureDefinition>